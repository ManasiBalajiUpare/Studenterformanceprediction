<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>All Students</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <style>
        /* Body styling */
        body {
            min-height: 100vh;
            padding: 40px 20px;
            background: #f8f9fa;
            font-family: "Segoe UI", sans-serif;
        }

        /* Heading */
        h2 {
            text-align: center;
            margin-bottom: 30px;
        }

        /* Table container */
        .table-responsive {
            padding: 10px !important;
            background-color: #fff !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
            border-radius: 10px !important;
        }

        /* Table images */
        table img {
            border-radius: 50% !important;
        }

        /* Status badges */
        .status-badge {
            display: inline-block !important;
            padding: 5px 12px !important;
            border-radius: 12px !important;
            color: #fff !important;
            font-size: 0.85rem !important;
        }

        .active-badge {
            background-color: #28a745 !important;
        }

        .disabled-badge {
            background-color: #dc3545 !important;
        }

        /* Table row hover animation */
        table tbody tr:hover {
            background-color: #e9f7ff !important;
            transition: 0.3s;
        }

        /* Button spacing */
        .btn-sm {
            margin: 2px;
        }
    </style>
</head>

<body>
    <%- include("navbar.ejs") %>
    <div class="container">
        <h2 class="text-center mb-4">View All Students</h2>

        <% if (typeof message !== 'undefined' && message) { %>
        <div class="alert alert-success text-center">
            <%= message %>
        </div>
        <% } %>

        <div class="table-responsive">
            <table class="table table-bordered table-hover table-striped text-center">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Contact</th>
                        <th>Address</th>
                        <th>Qualification</th>
                        <th>Course</th>
                        <th>Skills</th>
                        <th>Photo</th>
                        <th>Member Since</th>
                        <th>Status</th>
                        <th>Add Performance</th>
                       <!-- <th>Enable/Disable</th> -->
                        <th>Update</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <% if (students && students.length > 0) { %>
                        <% students.forEach(student => { %>
                            <tr>
                                <td><%= student.user_id %></td>
                                <td><%= student.name %></td>
                                <td><%= student.email %></td>
                                <td><%= student.contact %></td>
                                <td><%= student.address %></td>
                                <td><%= student.qualification %></td>
                                <td><%= student.course %></td>
                                <td><%= student.skills %></td>
                                <td>
                                    <% if (student.photo) { %>
                                        <img src="/uploads/<%= student.photo %>" width="50" height="50" alt="Photo" class="img-fluid rounded-circle">
                                    <% } else { %>
                                        N/A
                                    <% } %>
                                </td>
                                <td><%= new Date(student.created_at).toLocaleString() %></td>
        



                                
                                <td>
                                    <% if (!(student.status=="approved")) { %>
                                        
                                        <span class="status-badge disabled-badge">Inactive</span>
                                    <% } else { %>
                                       
                                        <span class="status-badge active-badge">Active</span>
                                        
                                    <% } %>
                                    
                                </td>
                       
<td>
  <a href="/admin/performance/add/<%= student.user_id %>" class="btn btn-primary btn-sm">Add Performance</a>
</td>


                                <td>
                                    <a href="/editstudent/<%= student.user_id %>" class="btn btn-primary btn-sm">Update</a>
                                </td>
                                <td>
                                    <form action="/students/delete/<%= student.user_id %>" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this student?');">
                                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    </form>
                                </td>
                            </tr>
                        <% }); %>
                    <% } else { %>
                        <tr>
                            <td colspan="15">No students found.</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
